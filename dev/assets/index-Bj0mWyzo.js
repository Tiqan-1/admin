import{o as C,u as k,r as p,b as E,e as F,j as e,c as T,B as d,p as z,I as u,S as I,E as P}from"./index-A-adSsHM.js";import{F as v}from"./Table-G1PRIFYi.js";import{l as f}from"./lessons-DYwd4km6.js";import{useLessonModal as D}from"./use-lesson-modal-Bram2hT9.js";import L from"./lesson-form-modal-BEWb7wqL.js";import _ from"./lesson-filter-DEyVuPwh.js";import{P as N}from"./index-SktCrtXs.js";import{C as O}from"./index-CNmwCIuf.js";import"./index-BFZDyYVH.js";import"./index-BnU87whj.js";import"./subjects-BekdBd7s.js";const B={video:"processing",pdf:"warning",other:"error"};function H(){const[a]=C(),{t:s}=k(),[r,i]=p.useState(Object.fromEntries(a.entries())),{data:n,refetch:l,isLoading:c,isFetching:m}=E({queryKey:["lessons",r],queryFn:()=>f.get(r),refetchOnWindowFocus:!1}),{modalProps:x,onCreate:h,onEdit:g}=D(()=>l()),j=F({mutationFn:t=>(console.log("mutationDelete",t),f.destroy(t)),onSuccess(){l()}});p.useEffect(()=>{i(Object.fromEntries(a.entries()))},[a]);function y(t){console.log("onSearch",t),i(t)}function S(){i({})}const b=t=>{j.mutate(t.id)},w=[{title:s("app.fields.title"),dataIndex:"title",render:(t,o)=>e.jsx("div",{children:o.title})},{title:s("app.fields.file type"),dataIndex:"type",render:(t,o)=>e.jsx(T,{color:B[o.type],children:s(`app.lessons.types.${o.type}`)})},{title:s("app.fields.url"),dataIndex:"url",render:(t,o)=>e.jsx(d,{color:"default",variant:"link",target:"_blank",href:o.url,children:o.url})},{title:s("common.action"),dataIndex:"operation",width:100,render:(t,o)=>e.jsxs("div",{className:"flex w-full justify-end text-gray",children:[e.jsx(z,{onClick:()=>g(o),children:e.jsx(u,{icon:"solar:pen-bold-duotone",size:18})}),e.jsx(N,{title:s("common.confirm-deleting"),okText:s("common.ok"),cancelText:s("common.cancel"),placement:"left",onConfirm:()=>b(o),children:e.jsx("button",{type:"button",children:e.jsx(u,{icon:"mingcute:delete-2-fill",size:18,className:"text-error"})})})]})}];return e.jsxs(I,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(_,{formValue:r,okDisabled:c||m,onClear:S,onSearch:y}),e.jsxs(O,{title:s("app.lessons.grid-header"),extra:e.jsxs(d,{type:"primary",onClick:()=>h(),children:[" ",s("common.create")," "]}),children:[e.jsx(v,{rowKey:"id",size:"small",scroll:{x:"max-content"},columns:w,locale:{emptyText:e.jsx(P,{description:"No Data",children:"Please select a subject"})},dataSource:n==null?void 0:n.items,loading:c||m,pagination:{pageSizeOptions:[10,30,50],current:r.page??1,showSizeChanger:!0,showQuickJumper:!0,total:n==null?void 0:n.total,onChange:(t,o)=>i({...r,page:t,pageSize:o})}}),e.jsx(L,{...x})]})]})}export{H as default};
