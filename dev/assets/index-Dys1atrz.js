import{ab as C,an as k,u as z,r as F,b as v,ac as P,j as e,aw as I,B as d,I as a,ap as D,S as E,D as N}from"./index-BSVNpzLa.js";import{F as T}from"./Table-tw5fWF5b.js";import{s as u}from"./subjects-C6d1o6xl.js";import{useSubjectModal as B}from"./use-subject-modal-pshWODKQ.js";import M from"./subject-form-modal-D9yqh-gc.js";import O from"./subject-filter-BUBvrV3a.js";import{P as _}from"./index-wR-9yEIL.js";import{C as q}from"./index-DWIyLedh.js";import"./index-BZ9Ca08E.js";import"./index-aRqXbJJH.js";import"./programs-N_YEcOwc.js";function U(){const p=C(),[f]=k(),{t:o}=z(),[n,r]=F.useState(Object.fromEntries(f.entries())),{data:i,refetch:c,isLoading:l,isFetching:m}=v({queryKey:["subjects",n],queryFn:()=>u.get(n),refetchOnWindowFocus:!1}),{modalProps:x,onCreate:j,onEdit:h}=B(()=>c()),g=P({mutationFn:t=>u.destroy(t),onSuccess(){c()}});function b(t){r(t)}function y(){r({})}const S=t=>{g.mutate(t.id)},w=[{title:o("app.fields.name"),dataIndex:"name",fixed:"left",render:(t,s)=>e.jsx("div",{children:s.name})},{title:o("app.fields.description"),dataIndex:"description",width:400,render:(t,s)=>e.jsx(I,{copyable:!0,ellipsis:!0,children:s.description})},{title:o("common.action"),key:"operation",fixed:"right",width:100,render:(t,s)=>e.jsxs("div",{className:"flex w-full justify-end text-gray",children:[e.jsx(d,{onClick:()=>p(`/lessons?subjectId=${s.id}`),icon:e.jsx(a,{icon:"solar:video-frame-play-horizontal-broken",size:18}),children:o("app.lessons.title")}),e.jsx(D,{onClick:()=>h(s),children:e.jsx(a,{icon:"solar:pen-bold-duotone",size:18})}),e.jsx(_,{title:o("common.confirm-deleting"),okText:o("common.ok"),cancelText:o("common.cancel"),placement:"left",onConfirm:()=>S(s),children:e.jsx("button",{type:"button",children:e.jsx(a,{icon:"mingcute:delete-2-fill",size:18,className:"text-error"})})})]})}];return e.jsxs(E,{direction:"vertical",size:"large",className:"w-full",children:[e.jsx(O,{formValue:n,okDisabled:l||m,onClear:y,onSearch:b}),e.jsx(N,{children:o("app.subjects.grid-header")}),e.jsxs(q,{extra:e.jsxs(d,{type:"primary",onClick:()=>j(),children:[" ",o("common.create")," "]}),children:[e.jsx(T,{rowKey:"id",size:"small",scroll:{x:"max-content"},columns:w,dataSource:i==null?void 0:i.items,loading:l||m,pagination:{pageSizeOptions:[10,30,50],current:n.page??1,showSizeChanger:!0,showQuickJumper:!0,total:i==null?void 0:i.total,onChange:(t,s)=>r({...n,page:t,pageSize:s})}}),e.jsx(M,{...x})]})]})}export{U as default};
