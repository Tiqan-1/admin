import{aa as a,r as g,b as y,j as e,av as F,as as s,ag as I}from"./index-D23LSBuJ.js";import{d as i}from"./dayjs.min-CtkmhUA1.js";import{p as q}from"./programs-CoL09nOh.js";import{S}from"./index-C4G7agBH.js";import{D as c}from"./index-FZqt9b3u.js";function O({title:u,show:f,formValue:t,okDisabled:h,onOk:x,onCancel:j}){const[n]=a.useForm();g.useEffect(()=>{n.setFieldsValue({...t})},[t,n]);const{data:l}=y({queryKey:["programs"],queryFn:()=>q.get(),refetchOnWindowFocus:!1}),b=l==null?void 0:l.items.map(({id:r,name:o})=>({value:r,label:e.jsx("span",{children:o})})),d={getValueProps:r=>({value:r&&i(r)}),normalize:r=>r&&`${i(r).toISOString()}`};return e.jsxs(F,{forceRender:!0,title:u,open:f,okButtonProps:{autoFocus:!0,htmlType:"submit",disabled:h},okText:t.id===void 0?s("common.create"):s("common.edit"),cancelText:s("common.cancel"),onCancel:j,modalRender:r=>e.jsx(a,{form:n,initialValues:t,onFinish:o=>{const m=i(o.start),p=i(o.end);if(m.isAfter(p)||m.isSame(p)){n.setFields([{name:"start",errors:[s("app.levels.errors.startBeforeEnd")]}]);return}x(t.id,o)},labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",children:r}),children:[!t.id&&e.jsx(a.Item,{label:s("app.fields.program"),name:"programId",rules:[{required:!0}],children:e.jsx(S,{showSearch:!0,options:b})}),e.jsx(a.Item,{label:s("app.fields.name"),name:"name",rules:[{required:!0}],children:e.jsx(I,{})}),e.jsx(a.Item,{label:s("app.fields.start"),name:"start",...d,rules:[{required:!0}],children:e.jsx(c,{style:{width:"100%"}})}),e.jsx(a.Item,{label:s("app.fields.end"),name:"end",...d,rules:[{required:!0}],children:e.jsx(c,{style:{width:"100%"}})})]})}export{O as default};
