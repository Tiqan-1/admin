import{aa as s,r as b,j as e,as as r,av as I,ag as x}from"./index-D23LSBuJ.js";import{d as p}from"./dayjs.min-CtkmhUA1.js";import{S as f}from"./index-C4G7agBH.js";import{D as g}from"./index-FZqt9b3u.js";function B({title:S,show:v,forUpload:l,formValue:i,okDisabled:y,onOk:j,onCancel:E}){const[n]=s.useForm(),h=b.useRef(null);b.useEffect(()=>{l||n.setFieldsValue({...i})},[l,i,n]);const d={getValueProps:t=>({value:t&&p(t)}),normalize:t=>t&&`${p(t).toISOString()}`},F=[{value:"created",label:e.jsx("span",{children:r("app.programs.statuses.created")})},{value:"published",label:e.jsx("span",{children:r("app.programs.statuses.published")})},{value:"suspended",label:e.jsx("span",{children:r("app.programs.statuses.suspended")})},{value:"cancelled",label:e.jsx("span",{children:r("app.programs.statuses.cancelled")})},{value:"deleted",label:e.jsx("span",{children:r("app.programs.statuses.deleted")})}],q=[{value:"public",label:e.jsx("span",{children:r("app.programs.types.public")})},{value:"approval",label:e.jsx("span",{children:r("app.programs.types.approval")})}];return e.jsx(I,{forceRender:!0,title:S,open:v,okButtonProps:{autoFocus:!0,htmlType:"submit",disabled:y},okText:i.id===void 0?r("common.create"):r("common.edit"),onOk:l?(()=>{var t,a;if(((t=h.current)==null?void 0:t.files)!==null){const o={thumbnail:((a=h.current)==null?void 0:a.files[0])??void 0};j(i.id,o)}}):void 0,cancelText:r("common.cancel"),onCancel:E,modalRender:t=>e.jsx(s,{form:n,encType:l?"multipart/form-data":void 0,initialValues:i,onFinish:l?void 0:a=>{const o=p(a.registrationStart),u=p(a.registrationEnd),m=p(a.start),c=p(a.end);if(o.isAfter(m)||o.isSame(m)){n.setFields([{name:"registrationStart",errors:[r("app.programs.errors.registrationStartBeforeProgramStart")]}]);return}if(o.isAfter(u)||o.isSame(u)){n.setFields([{name:"registrationStart",errors:[r("app.programs.errors.registrationStartBeforeregistrationEnd")]}]);return}if(u.isAfter(c)||u.isSame(c)){n.setFields([{name:"registrationEnd",errors:[r("app.programs.errors.registrationEndBeforeProgramEnd")]}]);return}if(m.isAfter(c)||m.isSame(c)){n.setFields([{name:"start",errors:[r("app.programs.errors.programStartBeforeProgramEnd")]}]);return}j(i.id,a)},labelCol:{span:6},wrapperCol:{span:18},layout:"horizontal",children:t}),children:l?e.jsx("input",{type:"file",name:"thumbnail",ref:h}):e.jsxs(e.Fragment,{children:[e.jsx(s.Item,{label:r("app.fields.name"),name:"name",rules:[{required:!0}],children:e.jsx(x,{})}),i.id&&e.jsx(s.Item,{label:r("app.fields.state"),name:"state",children:e.jsx(f,{showSearch:!0,options:F})}),e.jsx(s.Item,{label:r("app.fields.description"),name:"description",required:!0,rules:[{required:!0}],children:e.jsx(x.TextArea,{})}),e.jsx(s.Item,{label:r("app.fields.programSubscriptionType"),name:"programSubscriptionType",children:e.jsx(f,{showSearch:!0,options:q})}),e.jsx(s.Item,{label:r("app.fields.subscriptionFormUrl"),name:"subscriptionFormUrl",children:e.jsx(x,{})}),e.jsx(s.Item,{label:r("app.fields.start"),name:"start",...d,required:!0,rules:[{required:!0}],children:e.jsx(g,{style:{width:"100%"}})}),e.jsx(s.Item,{label:r("app.fields.end"),name:"end",...d,required:!0,rules:[{required:!0}],children:e.jsx(g,{style:{width:"100%"}})}),e.jsx(s.Item,{label:r("app.fields.registration start"),name:"registrationStart",...d,required:!0,rules:[{required:!0}],children:e.jsx(g,{style:{width:"100%"}})}),e.jsx(s.Item,{label:r("app.fields.registration end"),name:"registrationEnd",...d,required:!0,rules:[{required:!0}],children:e.jsx(g,{style:{width:"100%"}})})]})})}export{B as default};
