import{aj as l,ak as d,al as k,an as g,ac as h,r as w,as as c}from"./index-DpOLDryf.js";const y=t=>l.get({url:"/tasks",params:k(t),headers:{"ngrok-skip-browser-warning":"true"}}),b=t=>l.get({url:d("/tasks/:id",{id:t})}),v=t=>l.post({url:"/tasks",data:t}),P=(t,a)=>l.put({url:d("/tasks/:id",{id:t}),data:a}),E=t=>l.delete({url:d("/tasks/:id",{id:t})}),m={get:y,show:b,create:v,update:P,destroy:E};function p(t){const a={};for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const n=t[o];typeof n=="string"&&n===""?a[o]=void 0:typeof n=="object"&&n!==null?a[o]=p(n):a[o]=n}return a}const u={date:"",lessonIds:[],assignmentId:""};function O(t){const[a]=g();u.levelId=a.get("levelId")??void 0;const o=h({mutationFn:e=>{const s=p(e.data);return e.id!==void 0?m.update(e.id,s):m.create(s)},onSuccess:()=>{r(e=>({...e,show:!1,okDisabled:!1})),t()},onError(e,s,i){console.log("onError",e,s,i),r(f=>({...f,okDisabled:!1}))}}),[n,r]=w.useState({formValue:{...u},title:c("common.create"),show:!1,okDisabled:!1,onOk:(e,s)=>{o.mutate({id:e,data:s}),r(i=>({...i,okDisabled:!0}))},onCancel:()=>{r(e=>({...e,show:!1}))}});return{modalProps:n,setModalProps:r,onCreate:e=>{r(s=>({...s,show:!0,...u,title:c("common.create"),formValue:{...u,parentId:(e==null?void 0:e.id)??""}}))},onEdit:e=>{r(s=>({...s,show:!0,title:c("common.edit"),formValue:e}))},mutation:o}}const M=Object.freeze(Object.defineProperty({__proto__:null,useTaskModal:O},Symbol.toStringTag,{value:"Module"}));export{m as a,M as b,O as u};
